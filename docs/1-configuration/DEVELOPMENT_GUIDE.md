# 8-Bit Habits 開發指南

## 🎯 **開發哲學**

### **核心原則**
- **漸進式開發** - 小步驟迭代，每次都能編譯和測試
- **從現有代碼學習** - 先研究再實施
- **實用主義** - 適應專案現實，避免過度工程
- **清晰勝過聰明** - 選擇無聊但明確的解決方案

### **簡潔意味著**
- 單一職責原則
- 避免過早抽象化
- 不使用巧妙的技巧
- 如果需要解釋，就太複雜了

## 🔧 **開發流程**

### **1. 計劃與分階段**

將複雜工作分解為 3-5 個階段，記錄在 `IMPLEMENTATION_PLAN.md`:

```markdown
## Stage N: [名稱]
**目標**: [具體交付物]
**成功標準**: [可測試的結果]
**測試**: [具體測試案例]
**狀態**: [未開始|進行中|完成]
```

### **2. 實施流程**
1. **理解** - 研究現有代碼模式
2. **測試** - 先寫測試 (紅燈)
3. **實施** - 最小代碼通過測試 (綠燈)
4. **重構** - 在測試通過的情況下清理代碼
5. **提交** - 附帶清晰的提交訊息

### **3. 卡住時的處理 (最多 3 次嘗試)**

**關鍵**: 每個問題最多嘗試 3 次，然後停止。

1. **記錄失敗內容**:
   - 嘗試了什麼
   - 具體錯誤訊息
   - 失敗原因分析

2. **研究替代方案**:
   - 找到 2-3 個類似實現
   - 記錄不同的方法

3. **質疑基本假設**:
   - 這是正確的抽象層級嗎？
   - 能分解成更小的問題嗎？
   - 有更簡單的方法嗎？

4. **嘗試不同角度**:
   - 不同的函式庫功能？
   - 不同的架構模式？
   - 移除抽象而不是增加？

## 🏗️ **技術標準**

### **架構原則**
- **組合優於繼承** - 使用依賴注入
- **介面優於單例** - 啟用測試和彈性
- **明確優於隱含** - 清晰的資料流和依賴
- **盡可能測試驅動** - 永不禁用測試，要修復它們

### **代碼品質**
- **每次提交必須**:
  - 成功編譯
  - 通過所有現有測試
  - 包含新功能的測試
  - 遵循專案格式/檢查規則

- **提交前**:
  - 執行格式化工具/檢查工具
  - 自我審查變更
  - 確保提交訊息解釋"為什麼"

### **錯誤處理**
- 快速失敗，提供描述性訊息
- 包含除錯所需的上下文
- 在適當層級處理錯誤
- 永不靜默吞噬異常

## 🎯 **決策框架**

當存在多個有效方法時，根據以下順序選擇：

1. **可測試性** - 我能輕鬆測試這個嗎？
2. **可讀性** - 6 個月後有人能理解這個嗎？
3. **一致性** - 這符合專案模式嗎？
4. **簡潔性** - 這是最簡單的可行解決方案嗎？
5. **可逆性** - 日後修改有多困難？

## 🔄 **專案整合**

### **學習代碼庫**
- 找到 3 個類似的功能/組件
- 識別共同模式和慣例
- 盡可能使用相同的函式庫/工具
- 遵循現有的測試模式

### **工具使用**
- 使用專案現有的建置系統
- 使用專案的測試框架
- 使用專案的格式化/檢查設定
- 沒有強烈理由不引入新工具

## ✅ **品質關卡**

### **完成定義**
- [ ] 測試已寫並通過
- [ ] 代碼遵循專案慣例
- [ ] 沒有檢查工具/格式化警告
- [ ] 提交訊息清晰
- [ ] 實施符合計劃
- [ ] 沒有未附 issue 編號的 TODO

### **測試指南**
- 測試行為，不是實施
- 盡可能每個測試一個斷言
- 清晰的測試名稱描述情境
- 使用現有測試工具/輔助工具
- 測試應該是確定性的

## ⚠️ **重要提醒**

**永不**:
- 使用 `--no-verify` 繞過提交鉤子
- 禁用測試而不修復它們
- 提交無法編譯的代碼
- 做假設 - 用現有代碼驗證

**總是**:
- 增量提交可工作的代碼
- 隨時更新計劃文檔
- 從現有實施中學習
- 3 次失敗嘗試後停止並重新評估

## 🚀 **快速啟動**

### **日常開發流程**
```bash
# 啟動服務
cd challenge-app-backend && npm start &
cd challenge-app-frontend && npx expo start

# 代碼檢查
npm run lint
npm run format

# 測試
npm test

# 資料庫
npx prisma studio
npx prisma migrate dev
```

### **常用命令**
```bash
# 後端
cd challenge-app-backend
npm start              # 啟動開發伺服器
npx prisma studio     # 資料庫管理界面
npx prisma migrate dev # 創建新遷移

# 前端  
cd challenge-app-frontend
npx expo start         # 啟動 Expo 開發伺服器
npx expo run:android   # 建置並在 Android 運行
npx expo start --web   # 啟動 Web 版本
```